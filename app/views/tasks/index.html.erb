
<%# Notice mesajını sayfanın en üstünde göster %>
<% if notice %>
  <div class="alert alert-success text-center"><%= notice %></div>
<% end %>
<div class="col-md-12 m-4">
  <%# TodoApp %>
  <% content_for :title do %>
    Tasks
  <% end %>
  <div class="container">

          <h1 class="mb-4 text-center fw-bold">Todo App</h1>
    <div class="row justify-content-center">
      <div class="col-md-8">
        <div class="card p-3 mb-1 rounded">
          <!-- InCompleted Tasks -->
            <div>
              <h3 class="text-center" >InCompleted Tasks</h3> <hr>

              <table class="table table-striped table-hover">
              <thead>
                <tr>
                  <th>Completed</th>
                  <th>Title</th>
                  <th>Actions</th>
                </tr>
              </thead>

                <tbody>
                    <% @incomplete_tasks.each do |task| %>
                      <tr>
                      <td>
                        <%= form_with model: task do |f|%>
                         <%= f.check_box :completed, checked: task.completed, class: "form-check-input", onchange: 'this.form.submit();' %>
                        <% end %>
                      </td>
                      <td><%= task.title %></td>
                      <td class="d-flex justify-content-end ">
                        <%= link_to "Show", task, class: "btn btn-sm btn-info ms-1 " %>
                        <%= link_to "Edit", edit_task_path(task), class: "btn btn-sm btn-warning ms-1 " %>
                        <%= button_to "Delete", task_path(task), method: :delete, data: { confirm: "Are you sure?" }, class: "btn btn-sm btn-danger ms-1 " %>
                      </td>
                      </tr>
                      <% end %>
                </tbody>
              </table>
              </div>

          <!-- Completed Tasks -->
              <div>
                <h3 class="text-center">Completed Tasks</h3> <hr>
                  <table class="table table-striped table-hover">
                    <thead>
                      <tr>
                        <th>Completed</th>
                        <th>Title</th>
                        <th>Actions</th>
                      </tr>
                    </thead>
                    <tbody>
                      <% @completed_tasks.each do |task| %>
                        <tr class="table-success">
                          <td>
                            <%= form_with model: task, local: true do |f| %>
                              <%= f.check_box :completed, checked: task.completed, class: "form-check-input", onchange: 'this.form.submit()'  %>
                            <% end %>
                          </td>
                          <td><%= task.title %></td>
                          <td class="d-flex justify-content-end ">
                            <%= link_to "Show", task, class: "btn btn-sm btn-info ms-1" %>
                            <%= link_to "Edit", edit_task_path(task), class: "btn btn-sm btn-warning ms-1" %>
                            <%= button_to "Delete", task_path(task), method: :delete, data: { confirm: "Are you sure?" }, class: "btn btn-sm btn-danger ms-1" %>
                          </td>
                        </tr>
                      <% end %>
                    </tbody>
                </table>
              </div>


          <%= link_to "Add Todo", new_task_path, class: "btn btn-primary m-3 fw-bold" %>
        </div>
      </div>
    </div>
  </div>
</div>